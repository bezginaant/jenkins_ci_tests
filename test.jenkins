pipeline {
    agent any
    stages {
        stage('build') {
            steps {
                echo 'Building...'
                echo 'Build completed'
            }
        }
        stage('testing') {
            steps {
                sh "mkdir pytest_run"
                sh "cd pytest_run && git clone https://github.com/bezginaant/jenkins_ci_tests.git"
                sh "pwd"
                sh "ls"
                sh "cd pytest_run/jenkins_ci_tests/pytest_project/pytest_homework && pip install -r requirements.txt"
                sh "cd pytest_run/jenkins_ci_tests/pytest_project/pytest_homework && pytest -q pytest_project/pytest_homework/checker.py"
                sh "rm -rf pytest_run"
            }
        }
    }
}
